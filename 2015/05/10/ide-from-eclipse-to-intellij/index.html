<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <meta http-equiv="X-UA-Compatible" content="IE=edge" >
  <title>从Eclipse到Intellij | Frodo&#39;s Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="由于本人最近项目做过一次从eclipse到intellij切换的分享会，本来打算把相关的技术文档发给组员就可以完事。但是发现很多同学在切换的过程中仍然感觉到很难受，所以我打算把这次分享会的内容以文章的形式呈现出来。给更多的同学使用。
此文章是个人工作中的一次总结，当看到网上很多ctrl+c，ctrl+v的文章的时候。个人觉得还不如自己总结一下整个流程来得真实。这也是写本文章的一个动机。
前提在我们">
<meta property="og:type" content="article">
<meta property="og:title" content="从Eclipse到Intellij">
<meta property="og:url" content="http://frodoking.github.io/2015/05/10/ide-from-eclipse-to-intellij/index.html">
<meta property="og:site_name" content="Frodo's Blog">
<meta property="og:description" content="由于本人最近项目做过一次从eclipse到intellij切换的分享会，本来打算把相关的技术文档发给组员就可以完事。但是发现很多同学在切换的过程中仍然感觉到很难受，所以我打算把这次分享会的内容以文章的形式呈现出来。给更多的同学使用。
此文章是个人工作中的一次总结，当看到网上很多ctrl+c，ctrl+v的文章的时候。个人觉得还不如自己总结一下整个流程来得真实。这也是写本文章的一个动机。
前提在我们">
<meta property="og:updated_time" content="2015-09-14T06:51:32.566Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="从Eclipse到Intellij">
<meta name="twitter:description" content="由于本人最近项目做过一次从eclipse到intellij切换的分享会，本来打算把相关的技术文档发给组员就可以完事。但是发现很多同学在切换的过程中仍然感觉到很难受，所以我打算把这次分享会的内容以文章的形式呈现出来。给更多的同学使用。
此文章是个人工作中的一次总结，当看到网上很多ctrl+c，ctrl+v的文章的时候。个人觉得还不如自己总结一下整个流程来得真实。这也是写本文章的一个动机。
前提在我们">
  
    <link rel="alternative" href="/atom.xml" title="Frodo&#39;s Blog" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link rel="stylesheet" href="/css/style.css">
</head>

<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			
			<img lazy-src="https://avatars0.githubusercontent.com/u/7484982?v=3&amp;u=4e45871de440c2bd2302a5420358118d6a4950f7&amp;s=140" class="js-avatar">
			
		</a>

		<hgroup>
		  <h1 class="header-author"><a href="/">Frodo</a></h1>
		</hgroup>

		
		<p class="header-subtitle">熟悉的歌谣里，藏着童话的影子。</p>
		

		
			<div class="switch-btn">
				<div class="icon">
					<div class="icon-ctn">
						<div class="icon-wrap icon-house" data-idx="0">
							<div class="birdhouse"></div>
							<div class="birdhouse_holes"></div>
						</div>
						<div class="icon-wrap icon-ribbon hide" data-idx="1">
							<div class="ribbon"></div>
						</div>
						
						<div class="icon-wrap icon-link hide" data-idx="2">
							<div class="loopback_l"></div>
							<div class="loopback_r"></div>
						</div>
						
						
					</div>
					
				</div>
				<div class="tips-box hide">
					<div class="tips-arrow"></div>
					<ul class="tips-inner">
						<li>Menu</li>
						<li>Tags</li>
						
						<li>Links</li>
						
						
					</ul>
				</div>
			</div>
		

		<div class="switch-area">
			<div class="switch-wrap">
				<section class="switch-part switch-part1">
					<nav class="header-menu">
						<ul>
						
							<li><a href="/">主页</a></li>
				        
							<li><a href="/archives">文章列表</a></li>
				        
						</ul>
					</nav>
					<nav class="header-nav">
						<div class="social">
							
								<a class="github" target="_blank" href="https://github.com/frodoking" title="github">github</a>
					        
								<a class="weibo" target="_blank" href="http://weibo.com/u/2351718353" title="weibo">weibo</a>
					        
								<a class="zhihu" target="_blank" href="#" title="zhihu">zhihu</a>
					        
								<a class="rss" target="_blank" href="/atom.xml" title="rss">rss</a>
					        
								<a class="Sitemap" target="_blank" href="/sitemap.xml" title="Sitemap">Sitemap</a>
					        
						</div>
					</nav>
				</section>
				
				
				<section class="switch-part switch-part2">
					<div class="widget tagcloud" id="js-tagcloud">
						<a href="/tags/android/" style="font-size: 20px;">Android</a> <a href="/tags/java/" style="font-size: 15px;">Java</a> <a href="/tags/tools/" style="font-size: 10px;">tools</a> <a href="/tags/music/" style="font-size: 10px;">音乐</a>
					</div>
				</section>
				
				
				
				<section class="switch-part switch-part3">
					<div id="js-friends">
					
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://zipperary.com/">Zipperra&#39;s Blog</a>
			        
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://litten.github.io/">Litten&#39;s Blog</a>
			        
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://scatterman.github.io/">Scatterman&#39;s Blog</a>
			        
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://blog.danlew.net/">Dan Lew&#39;s Blog</a>
			        
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://diptech.sinaapp.com/">老苗的blog</a>
			        
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://codekk.com/open-source-project-analysis">codekk</a>
			        
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://androidweekly.net/">AndroidWeekly</a>
			        
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://www.google.com.cn">Google</a>
			        
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://www.baidu.com">Baidu</a>
			        
			        </div>
				</section>
				

				
			</div>
		</div>
	</header>				
</div>

    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
  	<div class="overlay">
  		<div class="slider-trigger"></div>
  		<h1 class="header-author js-mobile-header hide">Frodo</h1>
  	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
			
				<img lazy-src="https://avatars0.githubusercontent.com/u/7484982?v=3&amp;u=4e45871de440c2bd2302a5420358118d6a4950f7&amp;s=140" class="js-avatar">
			
			</div>
			<hgroup>
			  <h1 class="header-author">Frodo</h1>
			</hgroup>
			
			<p class="header-subtitle">熟悉的歌谣里，藏着童话的影子。</p>
			
			<nav class="header-menu">
				<ul>
				
					<li><a href="/">主页</a></li>
		        
					<li><a href="/archives">文章列表</a></li>
		        
		        <div class="clearfix"></div>
				</ul>
			</nav>
			<nav class="header-nav">
				<div class="social">
					
						<a class="github" target="_blank" href="https://github.com/frodoking" title="github">github</a>
			        
						<a class="weibo" target="_blank" href="http://weibo.com/u/2351718353" title="weibo">weibo</a>
			        
						<a class="zhihu" target="_blank" href="#" title="zhihu">zhihu</a>
			        
						<a class="rss" target="_blank" href="/atom.xml" title="rss">rss</a>
			        
						<a class="Sitemap" target="_blank" href="/sitemap.xml" title="Sitemap">Sitemap</a>
			        
				</div>
			</nav>
		</header>				
	</div>
</nav>

      <div class="body-wrap"><article id="post-ide-from-eclipse-to-intellij" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/05/10/ide-from-eclipse-to-intellij/" class="article-date">
  	<time datetime="2015-05-10T13:39:23.000Z" itemprop="datePublished">May 10</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      从Eclipse到Intellij
    </h1>
  

      </header>
      
      <div class="article-info article-info-post">
        
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/android/">Android</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/tools/">tools</a></li></ul>
	</div>

        
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/programming/">编程</a>
	</div>


        <div class="clearfix"></div>
      </div>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>由于本人最近项目做过一次从eclipse到intellij切换的分享会，本来打算把相关的技术文档发给组员就可以完事。但是发现很多同学在切换的过程中仍然感觉到很难受，所以我打算把这次分享会的内容以文章的形式呈现出来。给更多的同学使用。</p>
<p>此文章是个人工作中的一次总结，当看到网上很多ctrl+c，ctrl+v的文章的时候。个人觉得还不如自己总结一下整个流程来得真实。这也是写本文章的一个动机。</p>
<h2 id="前提"><a href="#前提" class="headerlink" title="前提"></a>前提</h2><p>在我们公司将软件工程师简称RD（Research Development）。所以我们从事着一份富有创造力和探究精神的职业。我们秉承软件工程师 ≠ 码农的职业路线，在科学技术的道路上不断探索、创造和前行着。我相信跟我同样职业的大部分人都有着自己“高傲”的一面，遇到问题解决问题以及不服的劲头经常出现。我是一个有着代码洁癖的人，以前遇到一个很好的架构师对方法和{}之间的空隙都有着严格的要求。当时的我是那么的不理解，但是当代码量越来越大的时候，好的编码格式就体现的是那么的明显。工作中好的东西需要我们有敢于尝试的勇气，这样对于我们提升自己我驱动的效率会高很多。所以很希望同行的同学们都保持一种高质量的创造水准，一起同行吧。。。<br><a id="more"></a><br>这里扯的有点多，不过也正是因为有问题的出现，新的探究就会萌芽。最后发展推广到成熟与运用。</p>
<p>文章主要侧重点是Android studio，不过个人更愿意大家能接触到intellij IDEA这个编译器上。</p>
<h2 id="为何要做迁移？"><a href="#为何要做迁移？" class="headerlink" title="为何要做迁移？"></a>为何要做迁移？</h2><p><strong>不得不说的Intellij</strong></p>
<p>intellij号称是最专业的IDE工具。下面这些总结都是本人在实际工作中深有体会的一些值得说明的优点：</p>
<blockquote>
<ol>
<li>自动完成的特性（由于非常快速的索引，这种支持速度要快上几个数量级）</li>
<li>强大的插件化工具集成（例如像版本控制git,svn）</li>
<li>代码的检测功能（自动检测unused/null，代码可精简写法，多个try catch的合并提示，String的拼接自动提示，toString的warp包装提示）</li>
<li>可以根据选择的地方来判断新建文件类型（同时还提供不同模板，这一条eclipse绝对是做不到的）</li>
<li>IntelliJ的调试器（“Smart step into”，如果一行中存在多个方法调用，我就可以选择进入到哪个方法中了）</li>
<li>重构功能（Android特定重构和快速修复）</li>
<li>工程目录与maven更相符合</li>
<li>更加强大的快捷键（alt+enter）</li>
<li>show history功能对每一个本地操作都可以追溯到</li>
<li>terminal 集成</li>
<li>个人非常喜欢黑色经典主题Darcula（语法高亮）</li>
<li>学习成本，其实IntelliJ是要比Eclipse低的，至少省去了很多配置插件、理清依赖、处理问题的功夫，同时设置也比Eclipse要简单不少</li>
</ol>
</blockquote>
<p><strong>Android studio独有特性</strong></p>
<blockquote>
<ol>
<li>采用最流行的Gradle构建工程（支持ProGuard和应用签名功能）</li>
<li>提示（比如左侧的图片、颜色和标签，右侧的警告）</li>
<li>UI设计（自带布局编辑器，text与实时的设计界面效果review，还能针对不同屏幕尺寸做效果切换,自带布局编辑器，可以让你拖放UI组件，并在多个屏幕配置上预览布局，等等。）</li>
<li>提示工具更好地对程序性能、可用性、版本兼容性和其问题进行版本捕捉；</li>
<li>analyze  inspecting code  （lint  去除无用资源）</li>
</ol>
</blockquote>
<h2 id="如何做迁移？"><a href="#如何做迁移？" class="headerlink" title="如何做迁移？"></a>如何做迁移？</h2><p>下面侧重讲一下Android studio如何做迁移这个事情</p>
<blockquote>
<ul>
<li>导入工程，直接import</li>
<li>新建工程，直接New Project，或者 New Library Project</li>
<li>如果说工程中存在*iml文件（这样的文件类似于 .classpath文件），后续直接open就ok</li>
</ul>
</blockquote>
<p><strong>自动化工具的演进</strong></p>
<blockquote>
<ol>
<li>make</li>
<li>ant  Ant是第一个“现代”构建工具，主要的不足是用XML作为脚本编写格式。 XML，本质上是层次化的，并不能很好地贴合Ant过程化编程的初衷。Ant的另外一个问题是，除非是很小的项目，否则它的XML文件很快就大得无法管理。Ant的主要优点在于对构建过程的控制上。</li>
<li>maven  Maven具备从网络上自动下载依赖的能力（Ant后来通过Ivy也具备了这个功能），这一点革命性地改变了我们开发软件的方式。但是，依赖管理不能很好地处理相同库文件不同版本之间的冲突</li>
<li>gradle 它具有Ant的强大和灵活，又有Maven的生命周期管理且易于使用。Gradle样板文件的代码很少，这是因为它的DSL被设计用于解决特定的问题：贯穿软件的生命周期，从编译，到静态检查，到测试，直到打包和部署。</li>
</ol>
</blockquote>
<p><strong>Gradle</strong><br>Gradle是以Groovy为基础，面向java应用，基于DSL（Domain Specific Language）语法的自动化构建工具。是Google引入，替换ant和maven的新工具，其依赖兼容maven(mavenCentral())和ivy(jcenter())。<br>使用gradle的目的:</p>
<blockquote>
<ul>
<li>更容易重用资源和代码</li>
<li>可以更容易创建不同的版本的程序，多个类型的apk包</li>
<li>更容易配置，扩展</li>
<li>更好的IDE集成</li>
</ul>
</blockquote>
<p><strong>Android Studio</strong><br>从工程的整体结构上来讲，Android studio采用了gradle工具来构建整个工程。脚本主要涵盖了如下五个方面:</p>
<blockquote>
<ul>
<li>Properties</li>
<li>Signing</li>
<li>Flavors</li>
<li>Build Types</li>
<li>Dependencies</li>
</ul>
</blockquote>
<p><strong>项目构成</strong><br>在最外层构建一个公共脚本，包括一些基本的构建工具版本信息和整个项目的编码方式等等。下边这段脚本是本人在项目中的运用:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">ext &#123;</span><br><span class="line">    compileSdkVersion = 21</span><br><span class="line">    buildToolsVersion = System.env.CUSTOM_BUILDTOOLS != null ? System.env.CUSTOM_BUILDTOOLS : &apos;21.1.2&apos;</span><br><span class="line">&#125;</span><br><span class="line">buildscript &#123;</span><br><span class="line">    def gradleVersion = System.env.CUSTOM_GRADLE != null ? System.env.CUSTOM_GRADLE : &apos;1.0.1&apos;</span><br><span class="line">    repositories &#123;</span><br><span class="line">        if (System.env.CUSTOM_REPO != null) &#123;</span><br><span class="line">            maven &#123; url System.env.CUSTOM_REPO &#125;</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            mavenCentral()</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    dependencies &#123;</span><br><span class="line">        classpath &quot;com.android.tools.build:gradle:$gradleVersion&quot;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">allprojects &#123;</span><br><span class="line">repositories &#123;</span><br><span class="line">        if (System.env.CUSTOM_REPO != null) &#123;</span><br><span class="line">            maven &#123; url System.env.CUSTOM_REPO &#125;</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            mavenCentral()</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    tasks.withType(JavaCompile) &#123;</span><br><span class="line">        options.encoding = &quot;UTF-8&quot;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">apply plugin: &apos;android-reporting&apos;</span><br></pre></td></tr></table></figure></p>
<p>ext主要是定义工程非正式属性，像编译工程使用的sdk版本，构建工具gradle版本。<br>buildscript主要是定义项目使用的库地址，这里一般有两种选择mavenCentral()和jcenter()。</p>
<p><strong>Libray工程构建</strong><br>Library工程只需要简单配置：</p>
<blockquote>
<ol>
<li>插件</li>
<li>构建工具</li>
<li>依赖(可以添加本地jar、也可以添加远程依赖jar、还可以添加library工程)</li>
</ol>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">apply plugin: &apos;com.android.library&apos;</span><br><span class="line"></span><br><span class="line">android &#123;</span><br><span class="line">    compileSdkVersion rootProject.ext.compileSdkVersion</span><br><span class="line">    buildToolsVersion rootProject.ext.buildToolsVersion</span><br><span class="line"></span><br><span class="line">    defaultConfig &#123;</span><br><span class="line">        minSdkVersion 8</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">dependencies &#123;</span><br><span class="line">    compile fileTree(dir: &apos;libs&apos;, include: [&apos;*.jar&apos;])</span><br><span class="line">    compile &apos;com.google.code.gson:gson:2.3.1&apos;</span><br><span class="line">    compile project(&quot;:tuancorelibrary&quot;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>App工程</strong><br>在app工程中比较重要的是对android属性的配置<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">defaultConfig &#123;</span><br><span class="line">        applicationId &quot;com.baidu.nuomi.sale&quot;</span><br><span class="line">        minSdkVersion 8</span><br><span class="line">        targetSdkVersion 21</span><br><span class="line">        versionCode 15</span><br><span class="line">        versionName &quot;2.0.5&quot;</span><br><span class="line">        multiDexEnabled false</span><br><span class="line"></span><br><span class="line">        ndk &#123;</span><br><span class="line">            moduleName &quot;MyJNI&quot;</span><br><span class="line">            ldLibs &quot;log&quot;, &quot;z&quot;, &quot;m&quot;</span><br><span class="line">            abiFilters &quot;armeabi&quot;, &quot;mips&quot;, &quot;x86&quot;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></p>
<p>ndk是很多同学容易搞不懂的地方。其实这个地方主要是配置我们工程下src-&gt;main-&gt;jni下的c代码打包成so并随着apk发布。<br>另外，第三方的so包应该放在src-&gt;main-&gt;jniLibs 下面的armeabi、x86对应文件夹中，这样就可以随着apk发布了。</p>
<p>签名与混淆<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">signingConfigs &#123;</span><br><span class="line">        debug &#123;</span><br><span class="line">        &#125;</span><br><span class="line">        release &#123;</span><br><span class="line">            storeFile file(&quot;androidkey.keystore&quot;)</span><br><span class="line">            storePassword &quot;Showmethemoney&quot;</span><br><span class="line">            keyAlias &quot;bnsale&quot;</span><br><span class="line">            keyPassword &quot;Showmethemoney&quot;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">buildTypes &#123;</span><br><span class="line">	release &#123;</span><br><span class="line">		signingConfig signingConfigs.release</span><br><span class="line">		minifyEnabled true //实现了自动清除无用资源的功能,还能够移除项目中引用的libraries的无用资源</span><br><span class="line">		zipAlignEnabled true</span><br><span class="line">		shrinkResources true</span><br><span class="line">		buildConfigField &quot;boolean&quot;, &quot;ISDEBUG&quot;, &quot;false&quot;</span><br><span class="line">		proguardFiles getDefaultProguardFile(‘proguard-android.txt’), ‘proguard-rules.pro’ //混淆</span><br><span class="line">	&#125;</span><br><span class="line">	debug &#123;</span><br><span class="line">		shrinkResources false</span><br><span class="line">		signingConfig signingConfigs.debug</span><br><span class="line">		buildConfigField &quot;boolean&quot;, &quot;ISDEBUG&quot;, &quot;true&quot;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>多渠道打包<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">productFlavors &#123; //就是可定义的产品特性</span><br><span class="line">        wandoujia &#123;</span><br><span class="line">        &#125;</span><br><span class="line">		91 &#123;</span><br><span class="line">        &#125;</span><br><span class="line">		360 &#123;</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br><span class="line">productFlavors.all &#123; flavor -&gt; //此处name 就是flavor中定义的sale_rd。此处是一个遍历所有特性替换渠道号</span><br><span class="line">	flavor.manifestPlaceholders = [BaiduMobAd_CHANNEL_VALUE: name]        </span><br><span class="line">	//百度统计中采用这样的方式处理 android:value=&quot;$&#123;BaiduMobAd_CHANNEL_VALUE&#125;&quot;</span><br><span class="line">&#125;</span><br><span class="line">applicationVariants.all &#123; variant -&gt;</span><br><span class="line">	def Date currentTime = new Date();</span><br><span class="line">	def java.text.SimpleDateFormat formatter = new java.text.SimpleDateFormat(&quot;yyyyMMddHHmmss&quot;);</span><br><span class="line">	def String dateString = formatter.format(currentTime);</span><br><span class="line">	variant.outputs.each &#123; output -&gt; //为每个不同的输出包重新打包，修改名称，可以采用java的方式写</span><br><span class="line">		def String tmpName</span><br><span class="line">		def String fileName</span><br><span class="line">		if (variant.name.contains(&quot;Release&quot;)) &#123;</span><br><span class="line">			tmpName = variant.name.replace(&quot;Release&quot;, &quot;&quot;);</span><br><span class="line">			fileName = &quot;saleapp_$&#123;tmpName&#125;_$&#123;defaultConfig.versionName&#125;_$&#123;dateString&#125;_release&quot;;</span><br><span class="line">		&#125; else &#123;</span><br><span class="line">			tmpName = variant.name.replace(&quot;Debug&quot;, &quot;&quot;);</span><br><span class="line">			fileName = &quot;saleapp_$&#123;tmpName&#125;_$&#123;defaultConfig.versionName&#125;_$&#123;dateString&#125;_debug&quot;;</span><br><span class="line">		&#125;</span><br><span class="line">		output.outputFile = file(&quot;$project.buildDir/$&#123;fileName&#125;.apk&quot;)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>由于脚本采用了groovy，所以内部可以使用java的代码。在上面这段代码中本人重点用了Date来对apk重新定义，这一点在多渠道打包中是非常有用的。</p>
<h2 id="Gradle自定义Task"><a href="#Gradle自定义Task" class="headerlink" title="Gradle自定义Task"></a>Gradle自定义Task</h2><p>由于我们在开发中经常遇到一些不常见的需求，那么我们需要自定义一些Task来达到我们的需求</p>
<p>例如项目还无法完全迁移的时候，我们可以采用ant引用原始打包方式来执行打包。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ant.importBuild ‘build.xml’ //使用ant原始打包方式</span><br></pre></td></tr></table></figure></p>
<p>自定义任务<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">task releaseJar(type: Copy) &#123;  //使用task重命名包</span><br><span class="line">    from( &apos;build/bundles/release&apos;)  </span><br><span class="line">    into( &apos;build/libs&apos;)  </span><br><span class="line">    include(&apos;classes.jar&apos;)  </span><br><span class="line">    rename(&apos;calsses.jar&apos;, &apos;superlog&apos; + VERSION_NAME + &apos;.jar&apos;)  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>调取系统命令行做更多事情<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">task testJavaExec(type: JavaExec)&#123; //使用java 命令执行main方法</span><br><span class="line">    main = &apos;Hello&apos;</span><br><span class="line">    args &apos;-d&apos;,&quot;build&quot;</span><br><span class="line">    args &apos;-p&apos;, &quot;nice&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="键位映射"><a href="#键位映射" class="headerlink" title="键位映射"></a>键位映射</h2><p>下面列出了一些个人认为比较使用的一些快捷键。很多同学说自己去改这个key-map，不过个人不是很认同，当你改了过后你会发现你越改越乱。</p>
<blockquote>
<ol>
<li>高亮所有相同变量ctrl+shift+F7</li>
<li>在方法和内部类之间跳转<br>alt+↑/↓</li>
<li>类文件结构弹窗<br>ctrl+F12</li>
<li>方法调用层级弹窗<br>ctrl+alt+H</li>
<li>定义快速查找<br>ctrl+shift+i（能看到当前代码快的快照）</li>
<li>收缩或者展开代码快<br>ctrl+shift+ +/-</li>
<li>书签，保存你的代码现场<br>F11</li>
<li>带字母或者数字的标签<br>ctrl+F11</li>
<li>展开标签<br>shift+F11</li>
<li>查找菜单选项<br>ctrl+shift+A</li>
<li>代码行级移动<br>alt+shift+↑/↓</li>
<li>删除行<br>ctrl+Y</li>
<li>行复制<br>ctrl+D</li>
<li>扩大或者缩小选择范围<br>ctrl+W/ctrl+shift+W</li>
<li>包裹代码段<br>ctrl+alt+T</li>
<li>查询最近编辑文件<br>ctrl+E</li>
<li>代码模块<br>ctrl+J （自动生成像单例一样的简单代码块）</li>
<li>方法整体移动<br>ctrl+shift+↑/↓</li>
<li>代码补全<br>ctrl+shift+Enter</li>
<li>回到上一次最后编辑位置<br>ctrl+shift+backspace</li>
<li>代码行合并<br>ctrl+shift+J</li>
<li>操作当前文件信息<br>alt+F1</li>
<li>移除包裹代码 （移除代码结构中的包裹代码，比如 if 语句,  while 循环, 或者 try/catch 语句）<br>ctrl+shift+delete </li>
</ol>
</blockquote>
<h2 id="Intellij-Gradle可以做得更多"><a href="#Intellij-Gradle可以做得更多" class="headerlink" title="Intellij + Gradle可以做得更多"></a>Intellij + Gradle可以做得更多</h2><p>笔者之前做了一个后台服务器的项目，发现gradle在项目管理上是如此的得心应手。所以单独拿一个section来说说Intellij和Gradle结合的另一些好的地方</p>
<ol>
<li>多环境配置<br>先抛开studio这个编译器，在正常的开发中一般都会涉及到开发环境和上线环境。<br>那么我们用gradle是如何做到这件事情的呢？来看一下本人自己的一段脚本：<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">def env = System.getProperty(&quot;env&quot;) ?: &quot;dev&quot;</span><br><span class="line">sourceSets &#123;</span><br><span class="line">    main &#123;</span><br><span class="line">        output.resourcesDir = &quot;$&#123;buildDir&#125;/classes/main&quot;</span><br><span class="line">        java &#123;</span><br><span class="line">            resources &#123;</span><br><span class="line">                srcDirs = [&quot;src/main/resources/public&quot;, &quot;src/main/resources/$env&quot;]</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>此段脚本可以很灵活的切换当前环境是dev还是publish（这里是dev的）。</p>
<ol>
<li><p>强大的插件化友好支持<br>做服务器的同学应该对war包非常的熟悉。如果在eclipse上直接运行工程的话需要配置需要运行服务器的插件，而这个配置过程其实是一个很痛苦的过程。而使用如下的方式将让我们从繁琐的配置中解脱出来：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">apply plugin: &apos;java&apos;</span><br><span class="line">apply plugin: &apos;groovy&apos;</span><br><span class="line">apply plugin: &apos;war&apos;</span><br><span class="line">apply plugin: &apos;jetty&apos;</span><br></pre></td></tr></table></figure>
</li>
<li><p>脚本整理<br>当工程越来越复杂的时候，脚本规整是一件很重要的事情。gradle中可以使用List来规整包依赖。可以使用apply调用多个gradle脚本文件达到拆分脚本的目的。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"> List spring = [&apos;org.springframework:spring-jdbc:4.1.3.RELEASE&apos;,</span><br><span class="line">               &apos;org.springframework:spring-context-support:4.1.3.RELEASE&apos;]</span><br><span class="line">List utils = [&apos;org.tuckey:urlrewritefilter:4.0.4&apos;,</span><br><span class="line">              &apos;org.apache.httpcomponents:httpclient:4.3.6&apos;,</span><br><span class="line">              &apos;com.googlecode.xmemcached:xmemcached:2.0.0&apos;,</span><br><span class="line">              &apos;org.aspectj:aspectjtools:1.8.4&apos;,</span><br><span class="line">              &apos;org.freemarker:freemarker:2.3.21&apos;,</span><br><span class="line"></span><br><span class="line">              &apos;c3p0:c3p0:0.9.1.2&apos;]</span><br><span class="line"></span><br><span class="line">dependencies &#123;</span><br><span class="line">    compile project(&apos;:core&apos;)</span><br><span class="line">    providedCompile &apos;javax.servlet:servlet-api:2.5&apos;</span><br><span class="line"></span><br><span class="line">    runtime &apos;javax.servlet:jstl:1.2&apos;</span><br><span class="line">    compile spring, utils</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">apply &quot;custom_build.gradle&quot;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>笔者看过spring的源码已经切入采用gradle构建，不过脚本的书写还不够专业。很多冗长的书写方式看起来非常的早够。也希望使用的同学注意自己的脚本质量。</p>

      
    </div>
    
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2015/05/16/android-retrofit/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption"><</strong>
      <div class="article-nav-title">
        
          Retrofit源码解析
        
      </div>
    </a>
  
  
    <a href="/2015/03/30/android-eventbus-otto-analysis/" id="article-nav-older" class="article-nav-link-wrap">
      <div class="article-nav-title">事件总线 —— otto的bus和eventbus对比分析</div>
      <strong class="article-nav-caption">></strong>
    </a>
  
</nav>

  
</article>


<div class="share_jia">
	<!-- JiaThis Button BEGIN -->
	<div class="jiathis_style">
		<span class="jiathis_txt">Share to: &nbsp; </span>
		<a class="jiathis_button_facebook"></a> 
    <a class="jiathis_button_twitter"></a>
    <a class="jiathis_button_plus"></a> 
    <a class="jiathis_button_tsina"></a>
		<a class="jiathis_button_cqq"></a>
		<a class="jiathis_button_douban"></a>
		<a class="jiathis_button_weixin"></a>
		<a class="jiathis_button_tumblr"></a>
    <a href="http://www.jiathis.com/share" class="jiathis jiathis_txt jtico jtico_jiathis" target="_blank"></a>
	</div>
	<script type="text/javascript" src="http://v3.jiathis.com/code/jia.js?uid=1405949716054953" charset="utf-8"></script>
	<!-- JiaThis Button END -->
</div>






<div class="duoshuo">
	<!-- 多说评论框 start -->
	<div class="ds-thread" data-thread-key="ide-from-eclipse-to-intellij" data-title="从Eclipse到Intellij" data-url="http://frodoking.github.io/2015/05/10/ide-from-eclipse-to-intellij/"></div>
	<!-- 多说评论框 end -->
	<!-- 多说公共JS代码 start (一个网页只需插入一次) -->
	<script type="text/javascript">
	var duoshuoQuery = {short_name:"true"};
	(function() {
		var ds = document.createElement('script');
		ds.type = 'text/javascript';ds.async = true;
		ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
		ds.charset = 'UTF-8';
		(document.getElementsByTagName('head')[0] 
		 || document.getElementsByTagName('body')[0]).appendChild(ds);
	})();
	</script>
	<!-- 多说公共JS代码 end -->
</div>




</div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
    	<div class="footer-left">
    		&copy; 2016 Frodo
    	</div>
      	<div class="footer-right">
      		<a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/litten/hexo-theme-yilia" target="_blank">Yilia</a> by Litten
      	</div>
    </div>
  </div>
</footer>
    </div>
    
  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">


<script>
	var yiliaConfig = {
		fancybox: true,
		mathjax: true,
		animate: true,
		isHome: false,
		isPost: true,
		isArchive: false,
		isTag: false,
		isCategory: false,
		open_in_new: false
	}
</script>
<script src="http://7.url.cn/edu/jslib/comb/require-2.1.6,jquery-1.9.1.min.js"></script>
<script src="/js/main.js"></script>






<script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    }
});

MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';                 
    }       
});
</script>

<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


  </div>
</body>
</html>